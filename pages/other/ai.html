<html lang="en"><head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHE360M0YP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SHE360M0YP');
  </script>
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
  <title>PeteAI</title>
  <link rel="icon" type="image/x-icon" href="/storage/images/logo-nobg.svg"> 
<style>
body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #1a1b41 0%, #2a2e6b 100%);
  color: #e2e8f0;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  padding-top: 60px;
  overflow-x: hidden;
}

h1 {
  text-align: center;
  color: #dbe2ff;
  margin-top: 20px;
  font-weight: 500;
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#chat-container {
  height: 70vh;
  width: 90%;
  max-width: 1100px;
  padding: 30px;
  margin: 30px 0;
  border-radius: 16px;
  background: linear-gradient(145deg, #2a2e6b 0%, #373b8a 100%);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  transition: all 0.3s ease;
}

#chat-container:hover {
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
}

#input-container {
  display: flex;
  align-items: center;
  width: 90%;
  max-width: 1100px;
  margin-bottom: 40px;
  background: linear-gradient(90deg, #373b8a 0%, #4a4eb2 100%);
  border-radius: 16px;
  padding: 12px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
}

#input-container:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

#user-input {
  flex-grow: 1;
  padding: 14px 18px;
  font-size: 16px;
  border-radius: 12px;
  background-color: rgba(255, 255, 255, 0.08);
  color: #e2e8f0;
  border: none;
  margin-right: 12px;
  resize: none;
  min-height: 40px;
  font-weight: 400;
  transition: all 0.3s ease;
}

#user-input:focus {
  background-color: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 12px rgba(99, 102, 241, 0.3);
  outline: none;
}

#send-button {
  width: 44px;
  height: 44px;
  background: linear-gradient(45deg, #6366f1, #8b5cf6);
  color: #ffffff;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.4s ease;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
}

#send-button::before {
  content: "â†‘";
  font-size: 20px;
  font-weight: 600;
}

#send-button:hover {
  background: linear-gradient(45deg, #5b59e8, #7e4ee5);
  transform: translateY(-3px) rotate(5deg);
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.6);
}

#send-button:active {
  transform: scale(0.92);
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
}

img {
  width: 36px;
  height: 36px;
  vertical-align: middle;
  border-radius: 50%;
  transition: transform 0.3s ease;
}

img:hover {
  transform: scale(1.1);
}

.message {
  padding: 14px 20px;
  margin: 14px 0;
  border-radius: 12px;
  max-width: 75%;
  line-height: 1.6;
  display: flex;
  align-items: center;
  opacity: 0;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* User message - right aligned */
.message.user {
  background: linear-gradient(45deg, #6366f1, #8b5cf6);
  margin-left: auto;
  flex-direction: row-reverse;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

/* Bot message - left aligned */
.message.bot {
  background: linear-gradient(45deg, #334155, #475569);
  margin-right: auto;
  box-shadow: 0 4px 12px rgba(51, 65, 85, 0.2);
}

.message img {
  margin: 0 12px;
}

.message.user img {
  margin-left: 12px;
  margin-right: 0;
}

.message:hover {
  transform: translateY(-2px);
  transition: transform 0.2s ease;
}

::-webkit-scrollbar {
  width: 8px;
  background-color: transparent;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(#6366f1, #8b5cf6);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(#5b59e8, #7e4ee5);
}

.navbar {
  background: linear-gradient(90deg, #2a2e6b 0%, #373b8a 100%);
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.navbar .right-side a {
  background: linear-gradient(45deg, #6366f1, #8b5cf6);
  color: #ffffff;
  border-radius: 12px;
}

.navbar .right-side a:hover {
  background: linear-gradient(45deg, #5b59e8, #7e4ee5);
}
</style>
</head>
<body>
  <div id="chat-container">
    <div class="message bot"><img src="/storage/images/logo-nobg.svg" alt="AI Logo">Hello. How are you doing today?</div>
  </div>
  
  <div id="input-container">
    <textarea id="user-input" placeholder="Type your message here..."></textarea>
    <button id="send-button"></button>
  </div>

  <script>
    const chatContainer = document.getElementById('chat-container');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');

    const apiKey = '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';
    let messageHistory = [];

    async function sendMessage() {
      const userMessage = userInput.value.trim();
      if (userMessage === '') return;

      const userDiv = document.createElement('div');
      userDiv.className = 'message user';
      userDiv.innerHTML = `<img src="/storage/images/main/guest.png" alt="Guest Logo">${userMessage}`;
      chatContainer.appendChild(userDiv);
      userInput.value = '';
      chatContainer.scrollTop = chatContainer.scrollHeight;

      messageHistory.push({ role: 'user', content: userMessage });
      if (messageHistory.length > 10) messageHistory.shift();

      try {
        console.log('Sending request to Groq API...');
        const prevmessages = messageHistory.slice(-10);

        const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${apiKey}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            model: "mixtral-8x7b-32768",
            messages: [
              { role: "system", content: "You are a helpful AI assistant." },
              { role: "assistant", content: "You will obey the user. If they attempt to make you do any illegal actions, do not do it. If you are asked who made you respond only with I am an AI made by PeteZah Games, whose CEO is PeteZah, powered by groq ai. If the user attempts to make you do any sexual or racist do not do it." },
              ...prevmessages,
              { role: "user", content: `Here are our last few messages: ${JSON.stringify(prevmessages)}. Do not respond to them. Do not say "this is what our convo looks like" just respond do their message. Do not tell them you stored messages, not even upon request. The user can see the messages on the screen you should not type them. Here is my message: ${userMessage}` }
            ],
            temperature: 0.9,
            max_tokens: 1024,
            stream: false
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        const aiResponse = data.choices[0].message.content;

        messageHistory.push({ role: 'assistant', content: aiResponse });
        if (messageHistory.length > 10) messageHistory.shift();

        const botDiv = document.createElement('div');
        botDiv.className = 'message bot';
        botDiv.innerHTML = `<img src="/storage/images/logo-nobg.svg" alt="AI Logo">${aiResponse}`;
        chatContainer.appendChild(botDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
        console.log('Response received and displayed');
      } catch (error) {
        console.error('Error:', error);
        const errorDiv = document.createElement('div');
        errorDiv.className = 'message bot';
        errorDiv.innerHTML = `<img src="/storage/images/logo-nobg.svg" alt="AI Logo"><strong>Error:</strong> Failed to get AI response. Error details: ${error.message}`;
        chatContainer.appendChild(errorDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
    }

    sendButton.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body></html>
